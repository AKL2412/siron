{%extends '::layout.html.twig'%}
{%block title%}
{{parent()}}
| Entités
{%endblock%}
{%block position %}
  {{parent()}}
          <li >
          	<a href="{{url('trc_admin_services')}} ">
              <i class="fa-tags fa"></i>
          		Entités
          	</a>
          </li>
{%endblock position%}
{%block titrepage%}
    Entités 
{%endblock titrepage%}
 {%block avancement%}     
 {%endblock avancement%}     
{%block content%}
<div class="row">
    <div class="col-md-5 col-md-offset-2-">
          <!-- general form elements -->
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">Ajouter une entité</h3>
              <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
            </button>
            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
            </div>
            </div>
            <!-- /.box-header -->
            <!-- form start -->
          
            {{form_start(form)}}
           
              <div class="box-body">
                  
                
                    <div class="form-group">
                      <label for="exampleInputEmail1">Nom de l'entité</label>
                      
                      {{form_widget(form.nom,{'attr':{'class':'form-control'}})}}
                    </div>
                    <div class="form-group">
                      <label for="exampleInputEmail1">Code de l'entité</label>
                      
                      {{form_widget(form.code,{'attr':{'class':'form-control'}})}}
                    </div>
                    <div class="form-group">
                      <label for="exampleInputPassword1">Type de l'entité</label>
                      {{form_widget(form.type,{'attr':{'class':'form-control select2'}})}}
                    </div>
                  
                
                <div class="form-group">

                  <label for="exampleInputFile">Entité parente</label>
                  {{form_widget(form.parent,{'attr':{'class':'form-control select2'}})}}
                </div>
                <div class="form-group">
                      <label for="exampleInputEmail1">Publier</label>
                      
                      {{form_widget(form.active)}}
                    </div>
                    <div class="form-group">
                      <label for="exampleInputEmail1">Ordre</label>
                      
                      {{form_widget(form.position,{'attr':{'class':'form-control'}})}}
                    </div>
              
              <!-- /.box-body -->

              <div class="box-footer">
                {{form_widget(form.save,{'attr':{'class':'btn btn-primary'}})}}
              </div>
            {{form_end(form)}}
          </div>


        </div>
</div>
   <div class="col-md-7">
    <div class="box box-primary">
  <div class="box-header with-border">
    <h3 class="box-title">Les entités</h3>

      <div class="box-tools pull-right">
        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
      </button>
      <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
      </div>
  </div>
           
  <div class="box-body">
  <div>
    <table class="table">
      <tr>
        <th>{{ knp_pagination_sortable(pagination, 'Code', 'a.code') }}</th>
        <th{% if pagination.isSorted('a.nom') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'nom', 'a.nom') }}</th>
        <th>{{ knp_pagination_sortable(pagination, "Date d'ajout", ['a.dateajout']) }}</th>
      </tr>
        {% for article in pagination %}
          <tr {% if loop.index is odd %}class="color"{% endif %}>
            <td>
              <span class="label label-default">
                {{article.type.code}}
              </span>
              {{ article.code }}
            </td>
            <td> 
              <a href="{{url('trc_admin_services_voir',{code:article.code})}} ">
              {%if article.parent is not null %}
                {{article.parent.code}}/
              {%endif%}
              {{ article.nom }} 
              </a>
              <a href="{{url('trc_admin_services_modif',{id:article.id})}} ">
                <i class="fa-edit fa"></i>
              </a>
              </td>
            <td>{{ article.dateajout | date('m-d-y H:i') }}</td>
          </tr>
        {% endfor %}
    </table>
    <div class="navigation">
      {{ knp_pagination_render(pagination) }}
    </div>
  </div>
  <div class="box-footer text-center">
    {{ pagination.getTotalItemCount }} entité(s) 
  </div>
</div>
  </div>     
</div>
<div class="row">
  
</div>
{%endblock%}
{%block script%}
<script type="text/javascript">
    activeLink("entites")
</script>
{%endblock script%}